<p-drawer
  header="Edit Task"
  [closable]="true"
  [visible]="true"
  position="right"
  id="drawer"
>
  <label for="title">Title: </label>
  <input
    type="text"
    id="title"
    (change)="this.selectedTask().title = txtTitle.value"
    [value]="selectedTask().title"
    #txtTitle
  />
  <label for="desc">Description: </label>
  <textarea
    id="desc"
    cols="30"
    rows="10"
    (change)="this.selectedTask().desc = txtDesc.value"
    [value]="selectedTask().desc"
    #txtDesc
  ></textarea>
  <p id="date">Date: {{ selectedTask().date }}</p>
  <div class="card flex justify-center" id="categories-list">
    <p>List:</p>
    <p-tag
      *ngIf="selectedTask().list"
      [value]="selectedTask().list.category_title"
      severity="danger"
      (click)="showDialog()"
      [rounded]="false"
    />
    <select #txtCategory (change)="changeCategory(txtCategory.value)">
      <option 
      [hidden] = "selectedTask().list.category_title === category.category_title"
        *ngFor="let category of currentClient.categories">
        {{ category.category_title }}
      </option>
    </select>
  </div>
  <div id="tag-list">
    <p>Tags:</p>
    <p-tag
      severity="danger"
      (click)="showDialog()"
      value="+ Add Tag"
      [rounded]="true"
    />
    <p-dialog
      header="Choose a tag"
      [modal]="true"
      [(visible)]="visibleDialog"
      [style]="{ width: '25rem' }"
    >
      <p-tag
        *ngFor="let tag of currentClient.tags"
        [hidden]="selectedTask().taglist.includes(tag)"
        (click)="selectTag(tag)"
        [value]="tag.tag_title"
        [rounded]="true"
      ></p-tag>
      <div class="flex justify-end gap-2">
        <p-button
          label="Close"
          severity="secondary"
          (click)="visibleDialog = false"
        />
      </div>
    </p-dialog>
    <div class="newTags">
      <p-tag
        *ngFor="let tag of selectedTask().taglist"
        [value]="tag.tag_title"
        [rounded]="true"
      ></p-tag>
    </div>
  </div>
  <div>
    <h2>SUBTASKS:</h2>
  </div>

  <ng-template #footer>
    <button type="button" class="p-button-text" (click)="saveChanges()">
      Save changes
    </button>
  </ng-template>
</p-drawer>
